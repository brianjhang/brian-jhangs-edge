# GEMINI.md

Gemini CLI 協同工作指導文檔

> 本文檔為 Gemini CLI 與 Claude Code 協同工作提供標準化流程和最佳實踐，確保獲得準確、可驗證的資訊。

## 🎯 協同工作原則

### 核心使命
利用 Gemini 2.5 Pro 的 100 萬 Token 上下文和即時網路資訊能力，為內容創作和技術分析提供準確、及時的第一手資料。

### 基本原則
1. **事實優先**：只接受可驗證的事實，拒絕推測和假設
2. **來源透明**：所有資訊必須標註來源和時間
3. **錯誤零容忍**：建立多重驗證機制，防範 AI 幻覺
4. **時效性保證**：確保資訊的最新性和準確性

## 🔧 標準化工作流程

### 階段一：初步查詢
```bash
gemini -p "請提供 [主題] 的最新權威資訊，嚴格要求：
1. 只提供有官方來源支撐的事實
2. 明確標註資料來源和日期
3. 區分已確認事實與市場預測
4. 如果資訊不足請誠實說明
5. 重點關注：[具體關注點]

**回應簡潔性要求**：請直接提供核心事實，避免冗長解釋以防超時"
```

### 超時處理策略
如果查詢超時，請拆分為多個簡單查詢：
```bash
# 範例：拆分技術升級查詢
gemini -p "僅回答：Pectra 升級當前狀態（已上線/測試中/計劃中）"
gemini -p "僅回答：Pectra 升級如已上線，具體日期是？"
```

### 階段二：事實查核
```bash
gemini -p "請驗證以下資訊的準確性：
[待驗證內容]

查核要求：
1. 確認每個數據點的官方來源
2. 識別任何可能的錯誤或過時資訊
3. 排除常見誤解（如：[具體澄清項目]）
4. 提供更新或更正建議
5. 標註最後驗證時間"
```

### 階段三：交叉驗證
```bash
gemini -p "請從多個權威來源交叉驗證：
[關鍵資訊點]

驗證標準：
1. 至少 2-3 個獨立權威來源
2. 時間點和數據的一致性檢查
3. 識別源頭資訊 vs 轉述資訊
4. 標註任何不一致之處
5. 提供最可信的版本"
```

### 階段四：數據精準核實 🆕
```bash
# 高風險數據核實（必須執行）
gemini -p "僅核實 [具體實體] 的 [具體數據類型]。要求：
1. 提供最新的準確數據
2. 標註官方數據來源  
3. 提供最後更新時間
4. 如有變化請說明差異
參考官方網站：[相關官方網站]
請簡潔回答，避免冗長解釋。"

# 交叉驗證
gemini -p "請交叉驗證以下數據的一致性：
[待驗證的數據清單]
檢查重點：不同來源數據是否一致、時間點是否匹配"
```

### 階段五：最終確認
```bash
gemini -p "最終確認以下內容的完整性和準確性：
[最終內容]

確認清單：
1. 所有事實都有可靠來源
2. 時間描述使用正確時態
3. 數據和案例真實可驗證
4. 沒有推測性陳述
5. 關鍵數據已完成精準核實
6. 提供完整的修改建議"
```

## ⚠️ 防範 AI 幻覺機制

### 高風險情況識別
- 涉及具體公司行為（如 MicroStrategy 購買 ETH）
- 包含確切數字和時間點
- 引用特定公告或事件
- 預測性或推測性內容
- **ETF 市場數據**（容易與 BTC ETF 混淆）
- **技術升級時程**（測試網 vs 主網狀態）

### 強制澄清要求
對於每個高風險情況，必須要求：
```bash
"如果 [知名實體] 沒有做 [特定行為]，請明確說明"
"不要推測任何未經官方確認的行為"
"區分已發生事件與市場分析預測"
"明確標註數據來源和最後更新時間"
```

### 錯誤檢查清單
- [ ] 是否有無法驗證的「具體數字」？
- [ ] 是否有「某公司宣布」但沒有來源？
- [ ] 是否混淆了相似概念（如「以太坊版 X」vs「X 購買以太坊」）？
- [ ] 時態是否正確（已發生 vs 預計）？
- [ ] 是否有邏輯推測代替事實陳述？
- [ ] **資訊一致性**：同一主題的不同查詢是否產生矛盾的結果？

## 📝 內容創作標準參考

### 專案文檔結構
進行內容創作前，**必須先參考以下專案文檔**以理解完整的創作標準和流程：

#### 📋 必讀核心文檔
```bash
1. README.md                     # 專案完整概述與技術架構
2. docs/topics-workflow.md       # 主要工作流程指導
3. docs/internal/ARTICLE_FRAMEWORK.md  # 文章架構標準
4. docs/topics/{series}-topics.md       # 系列風格指導
```

### 內容創作提示模板

#### 標準創作模板
```bash
"你是專業的[領域]作家，請先仔細研讀以下專案文檔，然後按照既定標準創作文章：

**必讀參考文檔**：
- README.md（專案概述、技術架構、內容策略）
- docs/topics-workflow.md（工作流程和品質標準）
- docs/internal/ARTICLE_FRAMEWORK.md（文章架構和寫作規範）
- docs/topics/[ai|crypto|startup]-topics.md（對應系列的風格指導）

**創作要求**：
1. 遵循專案的「深入淺出知識科普」風格定位
2. 嚴格按照 10段式文章架構
3. 包含完整的 MDX frontmatter
4. 字數：2000-3800字，繁體中文
5. 必須包含該系列要求的特殊元素

請完整寫出包括 frontmatter 和所有章節內容。"
```

### 品質提升要點
基於與 Claude Code 品質差異分析，Gemini CLI 特別注意：

1. **敘事溫度**：增加情境帶入和生活化類比
2. **數據具體性**：提供量化數字和真實案例
3. **視覺創意**：使用表格、流程圖、ASCII art
4. **實用工具**：包含檢核清單和資源連結

### Brian 風格寫作參考
**⭐ 重要更新**：專案已建立完整的 Brian 風格寫作手冊

📂 **參考文檔位置**：`docs/brian-writing-style-guide.md`

**核心風格要素**：
1. **結構化設計**：文章如產品般精心設計，優化快速掃描和深度閱讀
2. **價值前置**：開頭使用「一句話解答」和「Key Takeaways」
3. **視覺化溝通**：大量 Emoji、表格、代碼塊，降低理解門檻
4. **深入淺出**：生活化比喻解釋複雜概念，保留技術深度
5. **權威親和**：專業自信但使用「你」、「我們」拉近距離

**標準寫作流程**：
```bash
gemini -p "請先仔細研讀 docs/brian-writing-style-guide.md 中的完整寫作指導，
然後按照以下要求創作文章：

1. 嚴格遵循 Brian 風格模板結構
2. 使用指定的 Emoji 和視覺元素模式
3. 包含核心檢查清單所有要素
4. 確保語調符合「權威但親和」的標準
5. 添加 FAQ 區塊和行動呼籲

請參考手冊中的詳細指導，確保風格一致性達到 90%+ 標準。"
```

## 📝 專用提示模板

### 內容更新查詢
```bash
gemini -p "更新 [主題] 最新發展，要求：1) 官方來源驗證 2) 標註更新日期 3) 區分事實與預測"
```

### 技術資訊驗證
```bash
gemini -p "驗證 [技術項目] 當前狀態：1) 確認實際發布狀態 2) 提供官方來源 3) 避免推測內容"
```

## 🔄 持續改進機制

### 錯誤學習
每次發現 AI 幻覺或錯誤資訊時：
1. 記錄錯誤類型和原因
2. 更新防範機制
3. 優化提示詞模板
4. 加強驗證流程

### 已知問題與解決方案

#### 1. Gemini CLI 超時問題 ✅ 已解決
- **原因**：複雜查詢容易超過 2 分鐘限制
- **解決方案**：分批執行策略（Divide and Conquer）
- **詳細指導**：參考 `docs/work-logs/gemini-batch-execution-guide.md`

**分批執行核心原則**：
```bash
# ❌ 錯誤：一次性複雜查詢（會超時）
gemini -p "請生成三篇完整文章..."

# ✅ 正確：分批執行
gemini -p "請生成文章大綱：[主題]。請簡潔回答。"
gemini -p "請生成 frontmatter 和開頭段落。"
gemini -p "請生成主要章節內容。"
```

**標準執行流程**：
1. **規劃階段**：生成大綱和結構
2. **格式階段**：生成 frontmatter 和元數據  
3. **內容階段**：分章節生成主要內容
4. **完善階段**：生成結尾、FAQ、總結等

#### 2. 文章創建完整性問題 ✅ 已解決
- **問題**：生成內容但未創建實體 MDX 檔案，導致文章無法顯示
- **解決方案**：建立標準化文章創建流程
- **詳細記錄**：參考 `docs/work-logs/article-display-issue-fix.md`

#### 3. Schema 驗證問題 ✅ 已解決
- **問題**：文章 frontmatter 不符合實際生效的 schema 配置，導致驗證失敗
- **根本原因**：項目存在兩個 content 配置文件，`src/content.config.ts` 為實際生效配置
- **解決方案**：確保 frontmatter 符合實際 schema 要求

**Schema 驗證關鍵要求**：
```yaml
# 所有系列共同要求
type: "education"  # 必須：education/opinion/story
lang: "zh-TW"      # 必須：zh-TW/zh-CN/en
summary: "..."     # 必須：最大180字符

# Crypto 系列特殊要求
ticker: "BTC"      # 字符串格式（非陣列）
difficulty: "intermediate"  # beginner/intermediate/advanced
```

**完整文章創建檢查清單**：
```
□ 檔案路徑正確（src/content/{series}/{category}/{slug}.mdx）
□ frontmatter 包含所有必要欄位
□ type/lang/difficulty 使用正確的枚舉值
□ summary 長度在 180 字符內
□ ticker 使用字符串格式（非陣列）
□ date 格式統一（YYYY-MM-DD）
□ 符合各主題寫作風格要求
□ 建構測試無錯誤
□ 實際測試文章顯示效果
```

#### 3. 資訊一致性挑戰
- **原因**：不同時間點的回應可能有矛盾
- **解決**：必須在同一次對話中完成所有查詢，或明確記錄前次結果來保持一致

#### 4. 精確度提升空間
- **目標**：從 90% 提升至 95%+ 準確度
- **方法**：加強第四階段的細節檢查，對每個數據點進行雙重驗證

### 流程優化
定期評估和改進：
- 查詢效率和準確性
- 驗證機制的有效性
- 提示詞模板的適用性
- 整體協同工作品質

## 📂 相關工作日誌參考

### 核心操作指南
- **分批執行指南**：`docs/work-logs/gemini-batch-execution-guide.md` - Gemini CLI 超時問題的完整解決方案
- **文章創建修復**：`docs/work-logs/article-display-issue-fix.md` - 文章顯示問題的分析與解決
- **數據核實方法論**：`docs/work-logs/data-verification-methodology.md` - 高精準數據核實的標準流程

### 使用建議
1. **遇到超時問題**：參考分批執行指南，使用標準模板進行分批查詢
2. **文章無法顯示**：參考文章創建修復文檔，檢查 frontmatter 格式和文件路徑
3. **數據核實需求**：使用數據核實方法論，確保所有關鍵數據達到 95%+ 準確度
4. **持續改進**：基於工作日誌的經驗，不斷優化協同工作流程

### 文檔維護
- 所有新發現的問題和解決方案都會記錄在 `docs/work-logs/` 目錄
- GEMINI.md 會引用相關工作日誌，保持核心文檔的簡潔性
- 定期檢查工作日誌，將成熟的解決方案整合到標準流程中

---

**📌 重要提醒**：
- 本文檔會持續更新，反映最新的協同工作實踐
- 所有使用 Gemini CLI 的工作都應遵循此指導原則
- 當發現新問題時，應立即更新相關機制和模板