# ğŸš€ Astro å°ˆæ¡ˆæ•ˆèƒ½å„ªåŒ–æœ€ä½³å¯¦è¸æŒ‡å—

> åŸºæ–¼å¯¦æˆ°ç¶“é©—çš„å®Œæ•´æ•ˆèƒ½å„ªåŒ–æ–¹æ¡ˆï¼Œå¾ 79 åˆ†æå‡è‡³ 100/100 å®Œç¾åˆ†æ•¸

## ğŸ“Š å¯¦æˆ°æˆæœå±•ç¤º

### å„ªåŒ–å‰å¾Œå°æ¯”
| æŒ‡æ¨™ | å„ªåŒ–å‰ | å„ªåŒ–å¾Œ | æ”¹å–„å¹…åº¦ |
|------|--------|--------|----------|
| **Performance Score** | 79/100 | 100/100 | **+21åˆ†** |
| **FCP (é¦–æ¬¡å…§å®¹ç¹ªè£½)** | 2.4s | 0.3s | **-87.5%** |
| **LCP (æœ€å¤§å…§å®¹ç¹ªè£½)** | 3.2s | 0.3s | **-90.6%** |
| **TBT (ç¸½é˜»å¡æ™‚é–“)** | - | 0ms | **å®Œç¾** |
| **CLS (ç´¯ç©ç‰ˆé¢ä½ç§»)** | - | 0 | **å®Œç¾** |
| **åœ–ç‰‡è³‡æºå¤§å°** | 4.2MB | 0.8MB | **-81.0%** |

---

## ğŸ¯ æ ¸å¿ƒå„ªåŒ–ç­–ç•¥

### 1. æ¸²æŸ“æ¨¡å¼å„ªåŒ– â­â­â­â­â­

**æœ€é«˜å„ªå…ˆç´šå„ªåŒ–ï¼Œå–®ä¸€é…ç½®è®Šæ›´ç²å¾— 21 åˆ†æå‡**

#### å¯¦æ–½æ­¥é©Ÿ

```javascript
// astro.config.mjs - é—œéµé…ç½®è®Šæ›´
export default defineConfig({
  output: 'static',  // ğŸ”¥ å¾ 'server' æ”¹ç‚º 'static'
  adapter: vercel()
});
```

#### å‰ææ¢ä»¶
- âœ… æ‰€æœ‰é é¢è¨­å®š `export const prerender = true`
- âœ… ç„¡éœ€å‹•æ…‹ä¼ºæœå™¨ç«¯åŠŸèƒ½
- âœ… å…§å®¹å¯é å…ˆç”Ÿæˆ

#### å„ªåŒ–æ•ˆæœ
- **Performance Score**: 79 â†’ 100 (+21åˆ†)
- **FCP**: 2.4s â†’ 0.3s (-87.5%)
- **LCP**: 3.2s â†’ 0.6s (-81.3%)
- **TTFB**: å¤§å¹…é™ä½ï¼ˆéœæ…‹æª”æ¡ˆç›´æ¥å¾ CDN æä¾›ï¼‰

#### é©ç”¨å ´æ™¯
- éƒ¨è½æ ¼ã€æ–‡æª”ç«™é»
- ä¼æ¥­å®˜ç¶²ã€å±•ç¤ºå‹ç¶²ç«™
- é›»å•†ç”¢å“å±•ç¤ºé é¢
- ä»»ä½•ä¸»è¦ç‚ºéœæ…‹å…§å®¹çš„ç¶²ç«™

---

### 2. åœ–ç‰‡è³‡æºå„ªåŒ– â­â­â­â­

**ç¬¬äºŒå„ªå…ˆç´šï¼Œé¡¯è‘—æ”¹å–„è¼‰å…¥é€Ÿåº¦å’Œä½¿ç”¨è€…é«”é©—**

#### è‡ªå‹•åŒ–å„ªåŒ–å·¥å…·

å‰µå»º `scripts/optimize-og-images.js`ï¼š

```javascript
import sharp from 'sharp';

const OPTIMIZATION_CONFIG = {
  webp: {
    quality: 75,
    effort: 6
  },
  png: {
    quality: 75,
    compressionLevel: 9,
    adaptiveFiltering: true,
    palette: true
  }
};
```

#### å¯¦æ–½æ­¥é©Ÿ

1. **å»ºç«‹å„ªåŒ–è…³æœ¬**
```bash
node scripts/optimize-og-images.js      # åœ–ç‰‡å£“ç¸®
node scripts/update-og-references.js    # æ›´æ–°å¼•ç”¨
```

2. **æ ¼å¼è½‰æ›ç­–ç•¥**
- **PNG â†’ WebP**: ç¯€çœ 20-30% æª”æ¡ˆå¤§å°
- **16-bit â†’ 8-bit**: é¡å¤–ç¯€çœ 40-50%
- **å“è³ªè¨­å®š**: WebP 75% å“è³ªä¿æŒè¦–è¦ºæ•ˆæœ

3. **æ‰¹é‡è™•ç†æµç¨‹**
- è‡ªå‹•å‚™ä»½åŸæª”æ¡ˆ
- æ‰¹é‡è½‰æ›æ ¼å¼
- æ›´æ–°æ‰€æœ‰æª”æ¡ˆå¼•ç”¨
- å»ºç½®æ¸¬è©¦é©—è­‰

#### å¯¦æˆ°æˆæœ
- **æª”æ¡ˆæ•¸é‡**: 63 å¼µ OG åœ–ç‰‡
- **ç¸½å¤§å°**: 4.2MB â†’ 0.8MB
- **å£“ç¸®æ¯”ç‡**: 82% ç©ºé–“ç¯€çœ
- **è™•ç†æ™‚é–“**: ç´„ 2 åˆ†é˜

---

## ğŸ”§ é€²éšå„ªåŒ–æŠ€å·§

### 3. Astro é…ç½®æœ€ä½³åŒ–

```javascript
// astro.config.mjs - å®Œæ•´å„ªåŒ–é…ç½®
export default defineConfig({
  vite: {
    resolve: {
      alias: { '@': fileURLToPath(new URL('./src', import.meta.url)) }
    }
  },
  site: 'https://your-domain.com',
  output: 'static',
  adapter: vercel(),
  integrations: [
    react(),
    mdx(),
    sitemap({
      changefreq: 'weekly',
      priority: 0.7,
      entryLimit: 10000,
      serialize(item) {
        const now = new Date();

        // é¦–é æœ€é«˜å„ªå…ˆç´š
        if (item.url === 'https://your-domain.com/') {
          return {
            ...item,
            priority: 1.0,
            changefreq: 'daily',
            lastmod: now
          };
        }

        // æ ¸å¿ƒé é¢é«˜å„ªå…ˆç´š
        if (item.url.includes('/core-category/')) {
          return {
            ...item,
            priority: 0.9,
            changefreq: 'weekly',
            lastmod: now
          };
        }

        return { ...item, lastmod: now };
      }
    })
  ]
});
```

### 4. æ•ˆèƒ½ç›£æ§ç³»çµ±

#### å»ºç«‹è‡ªå‹•åŒ–ç›£æ§

```bash
# package.json scripts
"performance:check": "npx lighthouse https://your-domain.com --preset=desktop --only-categories=performance",
"performance:monitor": "node scripts/performance-monitor.js",
"performance:trends": "node scripts/performance-trends.js"
```

#### ç›£æ§é…ç½®

```javascript
const MONITOR_CONFIG = {
  thresholds: {
    performance: 90,  // Performance åˆ†æ•¸æœ€ä½æ¨™æº–
    fcp: 1.5,        // FCP æœ€å¤§å…è¨±æ™‚é–“ (ç§’)
    lcp: 2.5,        // LCP æœ€å¤§å…è¨±æ™‚é–“ (ç§’)
    tbt: 300,        // TBT æœ€å¤§å…è¨±æ™‚é–“ (æ¯«ç§’)
    cls: 0.1         // CLS æœ€å¤§å…è¨±å€¼
  }
};
```

---

## ğŸ› ï¸ å¯¦æ–½å·¥å…·çµ„

### å¿…å‚™å·¥å…·è…³æœ¬

1. **åœ–ç‰‡å„ªåŒ–**
   ```bash
   npm run optimize:images      # å£“ç¸®åœ–ç‰‡
   npm run optimize:update-refs # æ›´æ–°å¼•ç”¨
   npm run optimize:complete    # å®Œæ•´æµç¨‹
   ```

2. **æ•ˆèƒ½ç›£æ§**
   ```bash
   npm run performance:check    # å¿«é€Ÿæª¢æ¸¬
   npm run performance:monitor  # è©³ç´°ç›£æ§
   npm run performance:trends   # è¶¨å‹¢åˆ†æ
   ```

3. **ç³»çµ±ç¶­è­·**
   ```bash
   npm run system:health       # å¥åº·æª¢æŸ¥
   npm run project:maintenance # å®Œæ•´ç¶­è­·
   npm run maintenance:audit   # å®‰å…¨å¯©è¨ˆ
   ```

### å·¥å…·ç‰¹è‰²

- **å…¨è‡ªå‹•åŒ–**: é›¶äººå·¥å¹²é å®Œæˆå„ªåŒ–
- **å®‰å…¨å‚™ä»½**: é‡è¦è®Šæ›´å‰è‡ªå‹•å‚™ä»½
- **å®Œæ•´æ€§æª¢æŸ¥**: å»ºç½®æ¸¬è©¦ç¢ºä¿ç„¡éŒ¯èª¤
- **è©³ç´°å ±å‘Š**: é‡åŒ–å„ªåŒ–æ•ˆæœ
- **å¯é‡è¤‡åŸ·è¡Œ**: æ¨™æº–åŒ–æµç¨‹

---

## ğŸ“ˆ æ•ˆèƒ½ç›£æ§ç­–ç•¥

### æŒçºŒç›£æ§è¨ˆåŠƒ

#### æ¯æ—¥è‡ªå‹•æª¢æŸ¥
```bash
# è¨­å®š cron job æˆ– GitHub Actions
0 9 * * * cd /path/to/project && npm run performance:check
```

#### é€±åº¦æ·±åº¦åˆ†æ
```bash
# æ¯é€±åŸ·è¡Œå®Œæ•´åˆ†æ
npm run performance:monitor && npm run performance:trends
```

#### æœˆåº¦ç¶­è­·
```bash
# æ¯æœˆåŸ·è¡Œå®Œæ•´ç¶­è­·
npm run project:maintenance
```

### æ•ˆèƒ½åŸºæº–è¨­å®š

| æŒ‡æ¨™ | å„ªç§€ | è‰¯å¥½ | éœ€æ”¹å–„ |
|------|------|------|---------|
| Performance Score | 90-100 | 70-89 | <70 |
| FCP | <1.8s | 1.8-3.0s | >3.0s |
| LCP | <2.5s | 2.5-4.0s | >4.0s |
| TBT | <300ms | 300-600ms | >600ms |
| CLS | <0.1 | 0.1-0.25 | >0.25 |

---

## ğŸ¯ é …ç›®æ‡‰ç”¨æŒ‡å—

### é©ç”¨å°ˆæ¡ˆé¡å‹

#### âœ… é«˜åº¦é©ç”¨
- **éœæ…‹ç¶²ç«™**: éƒ¨è½æ ¼ã€æ–‡æª”ã€ä¼æ¥­å®˜ç¶²
- **å…§å®¹ç®¡ç†**: CMS é©…å‹•çš„å±•ç¤ºå‹ç¶²ç«™
- **é›»å•†å±•ç¤º**: ç”¢å“å±•ç¤ºã€å“ç‰Œå®˜ç¶²
- **å€‹äººä½œå“é›†**: é–‹ç™¼è€…ã€è¨­è¨ˆå¸«ä½œå“å±•ç¤º

#### âš ï¸ éœ€èª¿æ•´
- **å‹•æ…‹åŠŸèƒ½é‡åº¦**: éœ€è©•ä¼°å“ªäº›åŠŸèƒ½å¯é æ¸²æŸ“
- **å³æ™‚äº’å‹•**: è€ƒæ…®æ··åˆæ¸²æŸ“æ¨¡å¼
- **ç”¨æˆ¶ç”Ÿæˆå…§å®¹**: éƒ¨åˆ†é é¢ä½¿ç”¨ SSR

#### âŒ ä¸é©ç”¨
- **å³æ™‚èŠå¤©ç³»çµ±**: éœ€è¦ WebSocket ç­‰å³æ™‚åŠŸèƒ½
- **è¤‡é›œå¾Œç«¯é‚è¼¯**: é‡åº¦ä¾è³´ä¼ºæœå™¨ç«¯è™•ç†
- **å³æ™‚æ•¸æ“šæ›´æ–°**: è‚¡åƒ¹ã€å³æ™‚æ–°èç­‰

### å¯¦æ–½å„ªå…ˆç´š

#### éšæ®µä¸€ï¼šç«‹å³å¯¦æ–½ (30åˆ†é˜)
1. **æ¸²æŸ“æ¨¡å¼åˆ‡æ›**: `output: 'static'`
2. **å»ºç½®æ¸¬è©¦**: ç¢ºä¿æ‰€æœ‰é é¢æ­£å¸¸ç”Ÿæˆ
3. **æ•ˆèƒ½é©—è­‰**: åŸ·è¡Œ Lighthouse æ¸¬è©¦

#### éšæ®µäºŒï¼šæœ¬é€±å…§ (2å°æ™‚)
1. **åœ–ç‰‡å„ªåŒ–**: æ‰¹é‡è½‰æ› PNG â†’ WebP
2. **å¼•ç”¨æ›´æ–°**: è‡ªå‹•æ›´æ–°æ‰€æœ‰æª”æ¡ˆå¼•ç”¨
3. **å»ºç½®é©—è­‰**: ç¢ºä¿ç„¡ç ´æé€£çµ

#### éšæ®µä¸‰ï¼šæŒçºŒæ”¹é€² (ongoing)
1. **ç›£æ§ç³»çµ±**: å»ºç«‹å®šæœŸæ•ˆèƒ½æª¢æŸ¥
2. **è‡ªå‹•åŒ–å·¥å…·**: æ•´åˆåˆ° CI/CD æµç¨‹
3. **æœ€ä½³å¯¦è¸**: å°‡ç¶“é©—æ‡‰ç”¨åˆ°å…¶ä»–å°ˆæ¡ˆ

---

## ğŸ’¡ æˆåŠŸé—œéµå› ç´ 

### 1. ç³»çµ±æ€§æ–¹æ³•
- **å…¨é¢è©•ä¼°**: ä½¿ç”¨ Lighthouse å»ºç«‹åŸºç·š
- **éšæ®µæ€§å¯¦æ–½**: åˆ†æ­¥é©ŸåŸ·è¡Œï¼Œæ¯æ­¥é©—è­‰
- **æŒçºŒç›£æ§**: å»ºç«‹é•·æœŸç›£æ§æ©Ÿåˆ¶

### 2. è‡ªå‹•åŒ–å„ªå…ˆ
- **å·¥å…·åŒ–**: å°‡é‡è¤‡æ€§å·¥ä½œè‡ªå‹•åŒ–
- **æ¨™æº–åŒ–**: å»ºç«‹å¯é‡è¤‡çš„æµç¨‹
- **æ–‡æª”åŒ–**: è©³ç´°è¨˜éŒ„æ¯å€‹æ­¥é©Ÿ

### 3. æ•¸æ“šé©±å‹•
- **é‡åŒ–æŒ‡æ¨™**: ä½¿ç”¨å…·é«”æ•¸å­—è¡¡é‡æ•ˆæœ
- **å°æ¯”åˆ†æ**: å„ªåŒ–å‰å¾Œè©³ç´°å°æ¯”
- **è¶¨å‹¢è¿½è¹¤**: é•·æœŸç›£æ§æ•ˆèƒ½è®ŠåŒ–

### 4. é¢¨éšªæ§åˆ¶
- **å‚™ä»½ç­–ç•¥**: é‡è¦è®Šæ›´å‰å®Œæ•´å‚™ä»½
- **æ¼¸é€²å¯¦æ–½**: å°æ­¥å¿«è·‘ï¼Œé€æ­¥å„ªåŒ–
- **å›æ»¾æº–å‚™**: ç¢ºä¿å¯ä»¥å¿«é€Ÿå›æ»¾

---

## ğŸ“š å»¶ä¼¸å­¸ç¿’

### ç›¸é—œæŠ€è¡“æ–‡æª”
- [Astro éœæ…‹ç”ŸæˆæŒ‡å—](https://docs.astro.build/en/guides/static-site-generation/)
- [Sharp åœ–ç‰‡è™•ç†](https://sharp.pixelplumbing.com/)
- [Lighthouse æ•ˆèƒ½æ¸¬è©¦](https://developers.google.com/web/tools/lighthouse)
- [Core Web Vitals](https://web.dev/vitals/)

### é€²éšå„ªåŒ–æ–¹å‘
- **CSS å„ªåŒ–**: Critical CSSã€æœªä½¿ç”¨ CSS ç§»é™¤
- **JavaScript å„ªåŒ–**: ç¨‹å¼ç¢¼åˆ†å‰²ã€Tree shaking
- **å­—é«”å„ªåŒ–**: å­—é«”é¡¯ç¤ºç­–ç•¥ã€å­—é«”é è¼‰
- **è³‡æºæç¤º**: Preloadã€Prefetchã€DNS-prefetch

### ç¤¾ç¾¤è³‡æº
- [Astro Discord ç¤¾ç¾¤](https://astro.build/chat)
- [Web Performance æœ€ä½³å¯¦è¸](https://web.dev/fast/)
- [æ•ˆèƒ½å„ªåŒ–æ¡ˆä¾‹ç ”ç©¶](https://web.dev/fast/#case-studies)

---

## ğŸ† é æœŸæ”¶ç›Š

### ç›´æ¥æ•ˆç›Š
- **ä½¿ç”¨è€…é«”é©—**: è¼‰å…¥é€Ÿåº¦æå‡ 87.5%
- **æœå°‹å¼•æ“å„ªåŒ–**: å®Œç¾æ•ˆèƒ½åˆ†æ•¸æœ‰åˆ©æ’å
- **é »å¯¬æˆæœ¬**: åœ–ç‰‡å¤§å°æ¸›å°‘ 81%
- **ä¼ºæœå™¨è² è¼‰**: éœæ…‹æª”æ¡ˆ CDN åˆ†ç™¼

### é–“æ¥æ•ˆç›Š
- **é–‹ç™¼æ•ˆç‡**: è‡ªå‹•åŒ–å·¥å…·æå‡ç¶­è­·æ•ˆç‡
- **ç«¶çˆ­å„ªå‹¢**: ç¶²ç«™æ•ˆèƒ½é”åˆ°æ¥­ç•Œé ‚ç´šæ°´æº–
- **å¯æ“´å±•æ€§**: å„ªåŒ–å¾Œçš„æ¶æ§‹æ”¯æŒæ›´å¤§æµé‡
- **åœ˜éšŠèƒ½åŠ›**: å»ºç«‹æ•ˆèƒ½å„ªåŒ–æ¨™æº–å’Œæµç¨‹

### æŠ•è³‡å›å ±ç‡
- **æ™‚é–“æŠ•å…¥**: åˆæœŸ 4-6 å°æ™‚è¨­å®š
- **ç¶­è­·æˆæœ¬**: æ¯æœˆ 1 å°æ™‚ç›£æ§ç¶­è­·
- **æ•ˆæœæŒçºŒ**: é•·æœŸäº«å—å„ªåŒ–æ•ˆæœ
- **çŸ¥è­˜æ²‰æ¾±**: å¯é‡è¤‡æ‡‰ç”¨åˆ°å…¶ä»–å°ˆæ¡ˆ

---

**æœ€å¾Œæ›´æ–°**: 2025å¹´9æœˆ26æ—¥
**ç‰ˆæœ¬**: 1.0
**åŸºæ–¼å¯¦æˆ°å°ˆæ¡ˆ**: Brian Jhang's Tech Blog
**æ•ˆèƒ½æå‡**: 79 â†’ 100 åˆ† (21åˆ†æå‡)