---
import { getCollection } from "astro:content";

const daily = await getCollection("daily");

// 取各系列最新一篇
function pickLatest(series) {
  return daily
    .filter((p) => p.data.series === series)
    .sort((a,b) => (a.data.date < b.data.date ? 1 : -1))[0];
}
const latestCrypto = pickLatest("crypto");
const latestAI = pickLatest("ai");
const latestFounder = pickLatest("founder");
---

<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Brian Jhang's Edge — Startups × AI × Web3</title>
    <meta name="description" content="創業 × AI × Web3 的可執行知識基地" />
    <style>
      .wrap{max-width:1100px;margin:0 auto;padding:0 16px;}
      .btn{display:inline-block;padding:10px 14px;border-radius:12px;border:1px solid #111;color:#111;text-decoration:none;}
      .grid{display:grid;gap:16px;}
      @media(min-width:900px){.grid-3{grid-template-columns:repeat(3,1fr)}.grid-2{grid-template-columns:repeat(2,1fr)}}
      .card{border:1px solid #e5e7eb;border-radius:16px;padding:16px;background:#fff;}
      .muted{color:#6b7280;font-size:14px}
      header{padding:16px;border-bottom:1px solid #eee;background:#fff;position:sticky;top:0}
      footer{padding:24px 0;border-top:1px solid #eee;background:#fff;margin-top:48px}
      .hero{padding:80px 0;background:#0b0b0c;color:#fff;text-align:center}
      .hero h1{font-size:40px;margin:0 0 8px 0}
      .hero p{color:#cbd5e1}
    </style>
  </head>
  <body style="font-family:ui-sans-serif,system-ui;line-height:1.6;margin:0;background:#fafafa;">
    <header>
      <div class="wrap" style="display:flex;justify-content:space-between;align-items:center;">
        <a href="/" style="text-decoration:none;color:#111;font-weight:800">Brian Jhang's Edge</a>
        <nav style="display:flex;gap:16px;">
          <a href="/daily" style="color:#333;text-decoration:none">今日精選</a>
          <a href="/newsletter" style="color:#333;text-decoration:none">Newsletter</a>
          <a href="https://github.com" style="color:#333;text-decoration:none">GitHub</a>
        </nav>
      </div>
    </header>

    <section class="hero">
      <div class="wrap">
        <h1>Brian Jhang's Edge</h1>
        <p>Startups × AI × Web3 — Actionable Insights for the Next Builders<br/>創業 × AI × Web3 的可執行知識基地</p>
        <div style="margin-top:16px;display:flex;gap:12px;justify-content:center;">
          <a class="btn" href="#daily">查看今日精選</a>
          <a class="btn" href="/daily">全部文章</a>
        </div>
      </div>
    </section>

    <main class="wrap">
      <section id="daily" style="padding:32px 0;">
        <h2 style="margin:0 0 12px 0">今日精選</h2>
        <div class="grid grid-3">
          {latestCrypto && (
            <a class="card" href={`/daily/${latestCrypto.slug}`}>
              <div class="muted">{latestCrypto.data.date} · Crypto Top 100</div>
              <h3 style="margin:6px 0 8px 0">{latestCrypto.data.title}</h3>
              <p class="muted">{latestCrypto.data.summary}</p>
            </a>
          )}
          {latestAI && (
            <a class="card" href={`/daily/${latestAI.slug}`}>
              <div class="muted">{latestAI.data.date} · AI Insight</div>
              <h3 style="margin:6px 0 8px 0">{latestAI.data.title}</h3>
              <p class="muted">{latestAI.data.summary}</p>
            </a>
          )}
          {latestFounder && (
            <a class="card" href={`/daily/${latestFounder.slug}`}>
              <div class="muted">{latestFounder.data.date} · Founder's Line</div>
              <h3 style="margin:6px 0 8px 0">{latestFounder.data.title}</h3>
              <p class="muted">{latestFounder.data.summary}</p>
            </a>
          )}
        </div>
      </section>

      <section style="padding:8px 0 32px;">
        <div class="grid grid-2">
          <div class="card">
            <div class="muted">學習路徑</div>
            <h3 style="margin:6px 0 8px 0">Web3 入門 → 進階</h3>
            <p class="muted">從錢包、安全、鏈上數據到風控框架的系統化指南。</p>
          </div>
          <div class="card">
            <div class="muted">研究報告</div>
            <h3 style="margin:6px 0 8px 0">市場周報 & 主題深潛</h3>
            <p class="muted">每週/每月的觀點與圖表，幫助你把握敘事與節奏。</p>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="wrap" style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px;">
        <p class="muted">© {new Date().getFullYear()} Brian Jhang's Edge — 教育用途，非投資建議。</p>
        <div class="muted">X · Threads · IG · FB</div>
      </div>
    </footer>
  </body>
</html>
